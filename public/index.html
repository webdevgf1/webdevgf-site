<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Model Positioner</title>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@google/model-viewer@3.3.0/dist/model-viewer.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #0f1116;
            color: white;
            margin: 0;
            padding: 20px;
        }

        .container {
            display: flex;
            gap: 20px;
            height: 90vh;
        }

        .viewer-container {
            flex: 2;
            background: rgba(0,0,0,0.7);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }

        .model-wrapper {
            width: 100%;
            height: 100%;
            position: relative;
        }

        model-viewer {
            width: 100%;
            height: 100%;
            background-color: transparent;
        }

        .controls {
            flex: 1;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
        }

        .control-section {
            margin-bottom: 25px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
        }

        .control-section h3 {
            margin: 0 0 15px 0;
            color: #00f2fe;
            font-size: 16px;
        }

        .control-row {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            gap: 10px;
        }

        .control-row label {
            width: 120px;
            font-size: 14px;
        }

        .control-row input[type="range"] {
            flex: 1;
            height: 25px;
        }

        .value-display {
            width: 60px;
            text-align: center;
            font-family: monospace;
            color: #00f2fe;
            font-weight: bold;
            font-size: 14px;
        }

        .preset-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .btn {
            background: linear-gradient(45deg, #00f2fe, #4facfe);
            border: none;
            padding: 10px 15px;
            color: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
        }

        .btn:hover {
            transform: translateY(-1px);
            opacity: 0.9;
        }

        .btn.reset {
            background: linear-gradient(45deg, #ff6b6b, #ff4757);
        }

        .output-area {
            background: rgba(0,0,0,0.6);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .code-block {
            background: rgba(0,0,0,0.8);
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            white-space: pre-wrap;
            line-height: 1.4;
            max-height: 250px;
            overflow-y: auto;
            border: 1px solid rgba(255,255,255,0.2);
            margin: 10px 0;
        }

        .copy-btn {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            border: none;
            padding: 12px;
            color: white;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            font-size: 14px;
            font-weight: 500;
        }

        .status-bar {
            background: rgba(0,0,0,0.8);
            color: #00f2fe;
            padding: 12px;
            border-radius: 6px;
            text-align: center;
            margin-bottom: 20px;
            font-size: 13px;
            border-left: 4px solid #00f2fe;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="viewer-container">
            <div class="model-wrapper">
                <model-viewer 
                    id="viewer"
                    src="https://raw.githubusercontent.com/webdevgf1/webdevgf-site/main/amy.glb"
                    animation-name="idle" 
                    autoplay
                    camera-controls
                    disable-zoom="false">
                </model-viewer>
            </div>
        </div>

        <div class="controls">
            <div class="status-bar" id="status">
                Loading model...
            </div>

            <div class="control-section">
                <h3>Camera Position</h3>
                <div class="control-row">
                    <label>Target X:</label>
                    <input type="range" id="targetX" min="-5" max="5" step="0.1" value="0">
                    <span class="value-display" id="targetX-val">0.0</span>
                </div>
                <div class="control-row">
                    <label>Target Y:</label>
                    <input type="range" id="targetY" min="-3" max="5" step="0.1" value="0.5">
                    <span class="value-display" id="targetY-val">0.5</span>
                </div>
                <div class="control-row">
                    <label>Target Z:</label>
                    <input type="range" id="targetZ" min="-5" max="5" step="0.1" value="0">
                    <span class="value-display" id="targetZ-val">0.0</span>
                </div>
            </div>

            <div class="control-section">
                <h3>Camera Angle & Distance</h3>
                <div class="control-row">
                    <label>Horizontal Angle:</label>
                    <input type="range" id="orbitH" min="-180" max="180" step="5" value="0">
                    <span class="value-display" id="orbitH-val">0Â°</span>
                </div>
                <div class="control-row">
                    <label>Vertical Angle:</label>
                    <input type="range" id="orbitV" min="10" max="170" step="5" value="80">
                    <span class="value-display" id="orbitV-val">80Â°</span>
                </div>
                <div class="control-row">
                    <label>Distance:</label>
                    <input type="range" id="orbitD" min="0.5" max="8" step="0.1" value="3">
                    <span class="value-display" id="orbitD-val">3.0m</span>
                </div>
                <div class="control-row">
                    <label>Field of View:</label>
                    <input type="range" id="fov" min="15" max="120" step="1" value="30">
                    <span class="value-display" id="fov-val">30Â°</span>
                </div>
            </div>

            <div class="control-section">
                <h3>Quick Presets</h3>
                <div class="preset-buttons">
                    <button class="btn" onclick="setPreset('webcam')">Webcam</button>
                    <button class="btn" onclick="setPreset('portrait')">Portrait</button>
                    <button class="btn" onclick="setPreset('fullbody')">Full Body</button>
                    <button class="btn reset" onclick="setPreset('reset')">Reset</button>
                </div>
            </div>

            <div class="control-section">
                <h3>Generated Code</h3>
                <div class="output-area">
                    <div class="code-block" id="codeOutput">
                        Waiting for adjustments...
                    </div>
                    <button class="copy-btn" onclick="copyToClipboard()">ðŸ“‹ Copy Code</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const viewer = document.getElementById('viewer');
        const status = document.getElementById('status');
        const codeOutput = document.getElementById('codeOutput');

        // Get all sliders
        const sliders = {
            targetX: document.getElementById('targetX'),
            targetY: document.getElementById('targetY'),
            targetZ: document.getElementById('targetZ'),
            orbitH: document.getElementById('orbitH'),
            orbitV: document.getElementById('orbitV'),
            orbitD: document.getElementById('orbitD'),
            fov: document.getElementById('fov')
        };

        let isLoaded = false;

        // Update everything when sliders change
        function updateViewer() {
            if (!isLoaded) return;

            const values = {
                targetX: parseFloat(sliders.targetX.value),
                targetY: parseFloat(sliders.targetY.value),
                targetZ: parseFloat(sliders.targetZ.value),
                orbitH: parseFloat(sliders.orbitH.value),
                orbitV: parseFloat(sliders.orbitV.value),
                orbitD: parseFloat(sliders.orbitD.value),
                fov: parseFloat(sliders.fov.value)
            };

            // Update value displays
            Object.keys(values).forEach(key => {
                const display = document.getElementById(key + '-val');
                if (key === 'orbitH' || key === 'orbitV' || key === 'fov') {
                    display.textContent = values[key] + 'Â°';
                } else if (key === 'orbitD') {
                    display.textContent = values[key] + 'm';
                } else {
                    display.textContent = values[key].toFixed(1);
                }
            });

            // Apply to viewer
            viewer.cameraTarget = `${values.targetX}m ${values.targetY}m ${values.targetZ}m`;
            viewer.cameraOrbit = `${values.orbitH}deg ${values.orbitV}deg ${values.orbitD}m`;
            viewer.fieldOfView = `${values.fov}deg`;

            // Update status
            status.textContent = `Target: (${values.targetX.toFixed(1)}, ${values.targetY.toFixed(1)}, ${values.targetZ.toFixed(1)}) | Orbit: ${values.orbitH}Â° ${values.orbitV}Â° ${values.orbitD}m`;

            generateCode();
        }

        // Generate code output
        function generateCode() {
            const values = {
                targetX: parseFloat(sliders.targetX.value),
                targetY: parseFloat(sliders.targetY.value),
                targetZ: parseFloat(sliders.targetZ.value),
                orbitH: parseFloat(sliders.orbitH.value),
                orbitV: parseFloat(sliders.orbitV.value),
                orbitD: parseFloat(sliders.orbitD.value),
                fov: parseFloat(sliders.fov.value)
            };

            const html = `<model-viewer
    id="characterViewer"
    src="https://raw.githubusercontent.com/webdevgf1/webdevgf-site/main/amy.glb"
    animation-name="idle"
    autoplay
    camera-target="${values.targetX}m ${values.targetY}m ${values.targetZ}m"
    camera-orbit="${values.orbitH}deg ${values.orbitV}deg ${values.orbitD}m"
    field-of-view="${values.fov}deg"
    environment-image="neutral"
    exposure="2"
    disable-zoom="true"
    disable-pan="true"
    interaction-policy="none">
</model-viewer>`;

            const js = `viewer.addEventListener('load', () => {
    viewer.cameraTarget = "${values.targetX}m ${values.targetY}m ${values.targetZ}m";
    viewer.cameraOrbit = "${values.orbitH}deg ${values.orbitV}deg ${values.orbitD}m";
    viewer.fieldOfView = "${values.fov}deg";
    
    // ... rest of your code
});`;

            codeOutput.textContent = `HTML:\n${html}\n\nJavaScript:\n${js}`;
        }

        // Preset configurations
        function setPreset(preset) {
            const presets = {
                webcam: {
                    targetX: 0, targetY: 1.2, targetZ: 0,
                    orbitH: 0, orbitV: 80, orbitD: 2.5, fov: 30
                },
                portrait: {
                    targetX: 0, targetY: 1.0, targetZ: 0,
                    orbitH: 0, orbitV: 75, orbitD: 3.5, fov: 35
                },
                fullbody: {
                    targetX: 0, targetY: 0.5, targetZ: 0,
                    orbitH: 0, orbitV: 70, orbitD: 5, fov: 45
                },
                reset: {
                    targetX: 0, targetY: 0.5, targetZ: 0,
                    orbitH: 0, orbitV: 80, orbitD: 3, fov: 30
                }
            };

            const config = presets[preset];
            if (!config) return;

            Object.keys(config).forEach(key => {
                if (sliders[key]) {
                    sliders[key].value = config[key];
                }
            });

            updateViewer();
        }

        function copyToClipboard() {
            navigator.clipboard.writeText(codeOutput.textContent).then(() => {
                const btn = event.target;
                const original = btn.textContent;
                btn.textContent = 'âœ… Copied!';
                setTimeout(() => btn.textContent = original, 2500);
            });
        }

        // Set up event listeners
        Object.values(sliders).forEach(slider => {
            slider.addEventListener('input', updateViewer);
        });

        // Initialize when model loads
        viewer.addEventListener('load', () => {
            isLoaded = true;
            status.textContent = 'Model loaded! Adjust sliders to position.';
            status.style.background = 'rgba(46, 204, 113, 0.2)';
            status.style.borderLeftColor = '#2ecc71';
            status.style.color = '#2ecc71';
            updateViewer();
        });

        viewer.addEventListener('error', () => {
            status.textContent = 'Error loading model';
            status.style.background = 'rgba(231, 76, 60, 0.2)';
            status.style.borderLeftColor = '#e74c3c';
            status.style.color = '#e74c3c';
        });
    </script>
</body>
</html>
